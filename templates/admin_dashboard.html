<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <!-- Additional styles specific to admin dashboard if needed -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bass.css') }}">
</head>
<body>
    <!-- Admin Dashboard Content -->
    <div class="sidebar" id="sidebar">
        <a href="/">Return to Main Page</a>
        <a href="#set-models">Set Models</a>
        <a href="#users">Users</a>
        <a href="#comments">Comments</a> <!-- Link to comments section -->
    </div>
    <div class="content">
        <!-- Set Models Form -->
        <div class="form-container">
            <h2 id="set-models">Set Models</h2>
            <form action="{{ url_for('admin_bp.set_models') }}" method="post">
                <div>
                    <label for="ai_model">Select AI Model:</label>
                    <select id="ai_model" name="ai_model">
                        <option value="NoAIModel" {% if current_ai_model == 'NoAIModel' %}selected{% endif %}>No AI Model</option>
                        <option value="OpenAIModel" {% if current_ai_model == 'OpenAIModel' %}selected{% endif %}>OpenAI Model</option>
                        <option value="Llama3Model" {% if current_ai_model == 'Llama3Model' %}selected{% endif %}>Llama3 Model</option>
                    </select>
                </div>
                <div>
                    <label for="embedding_model">Select Embedding Model:</label>
                    <select id="embedding_model" name="embedding_model">
                        <option value="NoEmbeddingModel" {% if current_embedding_model == 'NoEmbeddingModel' %}selected{% endif %}>No Embedding Model</option>
                        <option value="OpenAIEmbeddingModel" {% if current_embedding_model == 'OpenAIEmbeddingModel' %}selected{% endif %}>OpenAI Embedding Model</option>
                    </select>
                </div>
                <div>
                    <label for="image_model">Select Image Model:</label>
                    <select id="image_model" name="image_model">
                        <option value="no_model" {% if current_image_model == 'no_model' %}selected{% endif %}>No Image Model</option>
                        <option value="CLIPModelHandler" {% if current_image_model == 'CLIPModelHandler' %}selected{% endif %}>CLIP Model</option>
                    </select>
                </div>
                <button type="submit">Set Models</button>
            </form>
        </div>

        <!-- Users Table -->
        <div class="table-container">
            <h2 id="users">Users</h2>
            <table>
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>User Level</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user.employee_id }}</td>
                        <td>{{ user.first_name }}</td>
                        <td>{{ user.last_name }}</td>
                        <td>{{ user.user_level.name }}</td>
                        <td>
                            <form action="{{ url_for('admin_bp.change_user_level') }}" method="post">
                                <input type="hidden" name="user_id" value="{{ user.id }}">
                                <select name="user_level">
                                    <option value="ADMIN" {% if user.user_level.name == 'ADMIN' %}selected{% endif %}>Admin</option>
                                    <option value="LEVEL_III" {% if user.user_level.name == 'LEVEL_III' %}selected{% endif %}>Level III</option>
                                    <option value="LEVEL_II" {% if user.user_level.name == 'LEVEL_II' %}selected{% endif %}>Level II</option>
                                    <option value="STANDARD" {% if user.user_level.name == 'STANDARD' %}selected{% endif %}>Standard</option>
                                </select>
                                <button type="submit">Change Level</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Comments Section -->
        <div class="table-container">
            <h2 id="comments">Comments</h2>
            <table>
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>Comment</th>
                        <th>Page URL</th>
                        <th>Image</th>
                        <th>Timestamp</th>
                    </tr>
                </thead>
                <tbody>
                    {% for comment in comments %}
                    <tr>
                        <td>{{ comment.user.employee_id if comment.user else 'Anonymous' }}</td>
                        <td>{{ comment.comment }}</td>
                        <td><a href="{{ comment.page_url }}" target="_blank">{{ comment.page_url }}</a></td>
                        <td>
                            {% if comment.screenshot_path %}
                            <a href="{{ url_for('static', filename=comment.screenshot_path) }}" target="_blank">View Image</a>
                            {% else %}
                            No Image
                            {% endif %}
                        </td>
                        <td>{{ comment.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Additional scripts specific to admin dashboard if needed -->
    <script src="{{ url_for('static', filename='js/base_sidebar.js') }}"></script>
</body>
</html>
