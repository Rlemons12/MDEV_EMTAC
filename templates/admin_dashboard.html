<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_dashboard.css') }}">
</head>
<body>
    <div class="sidebar" id="sidebar">
        <button class="toggle-btn" onclick="toggleSidebar()">Toggle Sidebar</button>
        <h2>Menu</h2>
        <a href="/">Return to Main Page</a>
        <a href="#set-models">Set Models</a>
        <a href="#users">Users</a>
    </div>

    <div class="content">
        <div class="form-container">
            <h2 id="set-models">Set Models</h2>
            <form action="{{ url_for('admin_bp.set_models') }}" method="post">
                <div>
                    <label for="ai_model">Select AI Model:</label>
                    <select id="ai_model" name="ai_model">
                        <option value="NoAIModel" {% if current_ai_model == 'NoAIModel' %}selected{% endif %}>No AI Model</option>
                        <option value="OpenAIModel" {% if current_ai_model == 'OpenAIModel' %}selected{% endif %}>OpenAI Model</option>
                        <option value="Llama3Model" {% if current_ai_model == 'Llama3Model' %}selected{% endif %}>Llama3 Model</option>
                    </select>
                </div>
                <div>
                    <label for="embedding_model">Select Embedding Model:</label>
                    <select id="embedding_model" name="embedding_model">
                        <option value="NoEmbeddingModel" {% if current_embedding_model == 'NoEmbeddingModel' %}selected{% endif %}>No Embedding Model</option>
                        <option value="OpenAIEmbeddingModel" {% if current_embedding_model == 'OpenAIEmbeddingModel' %}selected{% endif %}>OpenAI Embedding Model</option>
                    </select>
                </div>
                <div>
                    <label for="image_model">Select Image Model:</label>
                    <select id="image_model" name="image_model">
                        <option value="no_model" {% if current_image_model == 'no_model' %}selected{% endif %}>No Image Model</option>
                        <option value="CLIPModelHandler" {% if current_image_model == 'CLIPModelHandler' %}selected{% endif %}>CLIP Model</option>
                    </select>
                </div>
                <button type="submit">Set Models</button>
            </form>
        </div>

        <div class="table-container">
            <h2 id="users">Users</h2>
            <table>
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>User Level</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user.employee_id }}</td>
                        <td>{{ user.first_name }}</td>
                        <td>{{ user.last_name }}</td>
                        <td>{{ user.user_level.name }}</td>
                        <td>
                            <form action="{{ url_for('admin_bp.change_user_level') }}" method="post">
                                <input type="hidden" name="user_id" value="{{ user.id }}">
                                <select name="user_level">
                                    <option value="ADMIN" {% if user.user_level.name == 'ADMIN' %}selected{% endif %}>Admin</option>
                                    <option value="LEVEL_III" {% if user.user_level.name == 'LEVEL_III' %}selected{% endif %}>Level III</option>
                                    <option value="LEVEL_II" {% if user.user_level.name == 'LEVEL_II' %}selected{% endif %}>Level II</option>
                                    <option value="STANDARD" {% if user.user_level.name == 'STANDARD' %}selected{% endif %}>Standard</option>
                                </select>
                                <button type="submit">Change Level</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            var sidebar = document.getElementById("sidebar");
            sidebar.classList.toggle("collapsed");
        }
    </script>
</body>
</html>
