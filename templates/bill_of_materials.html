<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bill of Materials</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/search_bill_of_material.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bill_of_materials.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/redbanner.css')}}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="banner">
        THIS IS FOR REFERENCE ONLY. ALL INFORMATION SHOULD BE VERIFIED WITH CURRENT SOP'S
        <a href="#" id="commentPopupLink" style="color: #39FF14;">Leave a Comment</a>
    </div>
    <!-- Popup Modal Structure -->
<div id="commentPopup" style="display: none;">
    <form id="commentForm">
        <h2>Leave a Comment</h2>
        <!-- Instructions for filling out the form -->
        <p>Instructions: You can write your comment, paste an image, or upload a file.</p>

        <!-- Comment box where users can paste an image or type text -->
        <textarea name="comment" id="comment" placeholder="Write your comment here..." required></textarea><br>

        <!-- Hidden field to store base64 image data -->
        <input type="hidden" id="imageData" name="imageData">

        <!-- Display an indicator or preview if an image was pasted -->
        <div id="pastedImageFeedback" style="display: none; color: green;">
            Image snippet successfully added!
        </div>
        <img id="pastedImagePreview" src="" alt="Pasted Image Preview" style="display:none; max-width: 100px; margin-top: 10px;" />

        <!-- Option to upload a file -->
        <label for="fileUpload">Or upload an image:</label><br>
        <input type="file" id="fileUpload" name="screenshot" accept="image/*" /><br><br>

        <button type="submit">Send</button>
        <button type="button" id="closePopup">Close</button>
    </form>
</div>



    <div class="sidebar" id="sidebar">
        <button class="toggle-btn" onclick="toggleSidebar()">Toggle Sidebar</button>
        <h2>Menu</h2>
        {% if session['user_level'] == 'ADMIN' or session['user_level'] == 'LEVEL_III' %}
            <a href="/" style="color:  #FFFFFF;">Return to Main Page</a>
        {%  endif %}
        <a href="#search-bill-of-materials" onclick="showForm('search-bill-of-materials')">Search Bill of Materials</a>
        <a href="#upload-bill-of-materials" onclick="showForm('upload-bill-of-materials')">Upload Bill of Materials</a>
        {% if session['user_level'] == 'ADMIN' or session['user_level'] == 'LEVEL_III' %}
            <a href="#enter-new-part-number" onclick="showForm('enter-new-part-number')">Enter New Part</a>
            <a href="/upload_image" style="color: #39FF14;" class="upload-button">To Search and Upload </a>
            <a href="/troubleshooting_guide"style="color: #39FF14;">To Update Troubleshooting Guide</a>
         {% endif %}
        <a href="/logout" style="color:  #FF5F1F;" class="logout-button">Logout</a>

    </div>

    <div class="content-wrapper">
        <!-- Enter New Part Form -->
        <div id="enter-new-part-number" class="form-container">
            <h1>Enter New Part</h1>
            <form method="POST" action="{{ url_for('enter_new_part_bp.enter_part') }}">
                <label for="part_number" style="color: Yellow;">Part Number:</label>
                <input type="text" id="part_number" name="part_number" required><br>

                <label for="name" style="color: Yellow;">Name:</label>
                <input type="text" id="name" name="name" required><br>

                <label for="oem_mfg" style="color: Yellow;">OEM Manufacturer:</label>
                <input type="text" id="oem_mfg" name="oem_mfg"><br>

                <label for="model" style="color: Yellow;">Model:</label>
                <input type="text" id="model" name="model"><br>


                <label for="class_flag" style="color: Yellow;">Category:</label>
                <input type="text" id="class_flag" name="class_flag"><br>

                <label for="ud6" style="color: Yellow;">UD6:</label>
                <input type="text" id="ud6" name="ud6"><br>

                <label for="type" style="color: Yellow;">Type:</label>
                <input type="text" id="type" name="type"><br>

                <label for="notes" style="color: Yellow;">Long Description:</label>
                <textarea id="notes" name="notes"></textarea><br>

                <label for="documentation" style="color: Yellow;">Specifications:</label>
                <textarea id="documentation" name="documentation"></textarea><br>

                <input type="submit" value="Submit">
            </form>
        </div>

    <div class="content-wrapper">
        <!-- Upload Bill of Materials Form -->
        <div id="upload-bill-of-materials" class="form-container">
            <h2>Upload Bill of Materials</h2>
            <form id="upload-bom-form" action="/bill_of_materials" method="post" enctype="multipart/form-data">
                <label for="area" style="color: Yellow;">Area:</label>
                <select name="area" id="bom_areaDropdown"></select><br>

                <label for="equipment_group" style="color: Yellow;">Equipment Group:</label>
                <select name="equipment_group" id="bom_equipmentGroupDropdown"></select><br>

                <label for="model" style="color: Yellow;">Model:</label>
                <select name="model" id="bom_modelDropdown"></select><br>

                <label for="asset_number" style="color: Yellow;">Asset Number:</label>
                <select name="asset_number" id="bom_assetNumberDropdown"></select><br>

                <label for="location" style="color: Yellow;">Location:</label>
                <select name="location" id="bom_locationDropdown"></select><br>

                <label for="image_path" style="color: Yellow;">Image Path:</label>
                <input type="text" name="image_path" id="image_path"><br>

                <input type="file" name="file" required><br>
                <input type="submit" value="Upload">
            </form>
        </div>

        <!-- Search Bill of Materials Form -->
        <div id="search-bill-of-materials" class="form-container">
            <h1>Parts Search By Used On</h1>
            <form method="POST" action="{{ url_for('create_bill_of_material_bp.create_bill_of_material') }}">
                <div style="margin-bottom: 15px;">
                    <label for="filter_areaDropdown" style="color: Yellow;">Area:</label>
                    <select name="area" id="filter_areaDropdown" style="width: 100%; max-width: 600px;"></select>
                </div>

                <div style="margin-bottom: 15px;">
                    <label for="filter_equipmentGroupDropdown" style="color: Yellow;">Equipment Group:</label>
                    <select name="equipment_group" id="filter_equipmentGroupDropdown" style="width: 100%; max-width: 600px;"></select>
                </div>

                <div style="margin-bottom: 15px;">
                    <label for="filter_modelDropdown" style="color: Yellow;">Model:</label>
                    <select name="model" id="filter_modelDropdown" style="width: 100%; max-width: 600px;"></select>
                </div>

                <div style="margin-bottom: 15px;">
                    <label for="filter_assetNumberDropdown" style="color: Yellow;">Asset Number:</label>
                    <select name="asset_number" id="filter_assetNumberDropdown" style="width: 100%; max-width: 600px;"></select>
                </div>

                <div style="margin-bottom: 15px;">
                    <label for="filter_locationDropdown" style="color: Yellow;">Location:</label>
                    <select name="location" id="filter_locationDropdown" style="width: 100%; max-width: 600px;"></select>
                </div>

                <div style="margin-bottom: 15px;">
                    <input type="submit" value="Filter" style="background-color: #007bff; border-color: #007bff; color: #fff; padding: 10px 20px; font-size: 16px; cursor: pointer;">
                </div>
            </form>

            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div style="margin-top: 20px; padding: 10px; background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; border-radius: 4px;">
                        <ul>
                        {% for message in messages %}
                            <li>{{ message }}</li>
                        {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            {% endwith %}
        </div>
    </div>

    <script>
        function toggleSidebar() {
            var sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');
        }

        function showForm(formId) {
            var forms = document.getElementsByClassName('form-container');
            for (var i = 0; i < forms.length; i++) {
                forms[i].style.display = 'none';
            }
            document.getElementById(formId).style.display = 'block';
        }

        document.addEventListener('DOMContentLoaded', function() {
            var forms = document.getElementsByClassName('form-container');
            for (var i = 0; i < forms.length; i++) {
                forms[i].style.display = 'none';
            }
            document.getElementById('search-bill-of-materials').style.display = 'block'; // Show the default form
        });
    </script>
    <script src="{{ url_for('static', filename='js/get_bill_of_material_query.js') }}"></script>
<script src="{{ url_for('static', filename='js/bill_of_materials.js') }}"></script>
<script src="{{ url_for('static', filename='js/comment_pop_up.js')}}"></script>
<!--<script src="{{ url_for('static', filename='js/populate_part_dropdowns.js') }}"></script> -->
</body>
</html>
