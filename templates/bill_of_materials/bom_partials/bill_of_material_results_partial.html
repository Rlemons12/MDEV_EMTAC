<!-- bill_of_material_results_partial.html -->

<!-- Load results-specific styles here so they apply when this fragment is AJAX-loaded -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/create_bill_of_material_results.css') }}">

<table>
  <thead>
    <tr>
      <th>Part Number</th>
      <th>Description</th>
      <th>OEM Manufacturer</th>
      <th>Model</th>
      <th>Class Flag</th>
      <th>UD6</th>
      <th>Type</th>
      <th>Notes</th>
      <th>Documentation</th>
      <th>Image</th>
    </tr>
  </thead>
  <tbody>
    {% for item in parts_and_images %}
    <tr>
      <td>{{ item.part.part_number }}</td>
      <td>{{ item.part.name }}</td>
      <td>{{ item.part.oem_mfg or 'N/A' }}</td>
      <td>{{ item.part.model or 'N/A' }}</td>
      <td>{{ item.part.class_flag or 'N/A' }}</td>
      <td>{{ item.part.ud6 or 'N/A' }}</td>
      <td>{{ item.part.type or 'N/A' }}</td>
      <td>{{ item.part.notes or 'N/A' }}</td>
      <td>{{ item.part.documentation or 'N/A' }}</td>
      <td>
        {% if item.image %}
          <a href="{{ url_for('create_bill_of_material_bp.bom_serve_image_route', image_id=item.image.id) }}" target="_blank">
            <img class="thumbnail" src="{{ url_for('create_bill_of_material_bp.bom_serve_image_route', image_id=item.image.id) }}" alt="{{ item.image.title }}">
          </a>
        {% else %}
          <p>No image available</p>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="pagination">
  <!-- pagination controls here -->
  {% if prev_index is not none %}
    <a href="{{ url_for('create_bill_of_material_bp.view_bill_of_material', index=prev_index, per_page=per_page) }}">Previous</a>
  {% endif %}
  <form id="per-page-form" method="GET" action="{{ url_for('create_bill_of_material_bp.view_bill_of_material') }}">
    <label for="per_page">Items per page:</label>
    <select id="per_page" name="per_page">
      <option value="4" {% if per_page == 4 %}selected{% endif %}>4</option>
      <option value="10" {% if per_page == 10 %}selected{% endif %}>10</option>
      <option value="25" {% if per_page == 25 %}selected{% endif %}>25</option>
      <option value="50" {% if per_page == 50 %}selected{% endif %}>50</option>
    </select>
    <input type="hidden" name="index" value="{{ index }}">
  </form>
  {% if next_index is not none %}
    <a class="next" href="{{ url_for('create_bill_of_material_bp.view_bill_of_material', index=next_index, per_page=per_page) }}">Next</a>
  {% endif %}
</div>
