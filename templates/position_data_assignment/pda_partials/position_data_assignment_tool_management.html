<!--templates/position_data_assignment/pda_partials/position_data_assignment_tool_management.html-->

<!-- No doctype, no <head>, no <body> -->
<div id="toolManagementContainer">
    <h3>Tool Management</h3>

    <!-- Sub-Tab Navigation -->
    <div class="sub-tab-container">
        <ul class="sub-tab-list">
            <!-- 1) Associated Tools tab (default) -->
            <li class="sub-tab-item active" data-subtab="associated-tools">Associated Tools</li>
            <!-- 2) Add/Search Tools tab -->
            <li class="sub-tab-item" data-subtab="add-search-tools">Add/Search Tools</li>
            <!-- 3) Edit Tools tab -->
            <li class="sub-tab-item" data-subtab="edit-tools">Edit Tools</li>
        </ul>
    </div>

    <!-- Sub-Tab Content Sections -->

    <div id="associated-tools" class="sub-tab-content active">
      <h4>Currently Associated Tools</h4>

      <!-- Table where we'll inject the associated tools via JS -->
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Manufacturer</th>
            <th>Type</th>
            <th>Material</th>
            <th>Category</th>
          </tr>
        </thead>
        <tbody id="associatedToolsTableBody">
          <!-- Tools will be dynamically populated here by renderAssociatedTools() -->
        </tbody>
      </table>

      <button type="button" id="goToAddToolsBtn">Add a Tool</button>
    </div>

    <!-- 2) Add/Search Tools -->
    <div id="add-search-tools" class="sub-tab-content" style="display:none;">
        <h4>Add / Search Tools</h4>
        <!-- This is your search form; moved here -->
        <form id="toolManagementForm" method="POST" action="{{ url_for('position_data_assignment_bp.pda_search_tools') }}">
            {{ tool_search_form.hidden_tag() }}
            <!-- Hidden field for Position ID -->
            <input type="hidden" id="position_id" name="position_id" value="{{ position.id }}">

            <!-- Tool Name -->
            <div class="form-group">
                <label for="tool_name">Tool Name:</label>
                <input type="text" id="tool_name" name="tool_name" placeholder="Enter Tool Name">
            </div>

            <!-- Additional fields (manufacturer, etc.) -->

            <!-- Search Button -->
            <button type="submit" id="toolSearchBtn">Search Tools</button>
        </form>

        <!-- Results Section -->
        <div id="toolSearchResults" style="margin-top: 20px;">
            <p>No search results yet...</p>
        </div>
    </div>

    <!-- 3) Edit Tools -->
    <div id="edit-tools" class="sub-tab-content" style="display:none;">
        <h4>Edit Tools</h4>
        <p>Placeholder for editing a specific tool. You can load data here later.</p>
    </div>
</div>
